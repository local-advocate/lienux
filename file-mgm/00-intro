=> Layers: disk->driver->file system->vfs->sys calls->library->user/application


=> Files:
-  structured or unstructure series of bytes or objects with metadata
-  open file table : how many open files and all metadata for it (removed when no proc uses that file)
-  per proc table  : pointer to open file table, current position, access info
-  when writing/reading, ram is used as the buffer

=> naming:
-  use numbers for files (keep dictionary/hash table for those numbers or map em) [ls -i]
-  store directories on disk just like file but keep a bit to identify
-  links (another file name but with same file descriptor) [os keeps ref count. only deletes after all links gone]
-  circular links to dirs would cause the file to be never be deleted [every dir is hardlinked to itself ln]
-  soft links: dont point to fd but to file name (shortcuts) [if delete original file then all contents gone]


=> File operations:
-  Basic    : create, delete, open, close, read, write, seek, etc.
-  Metadata : links, attributes, owner, protection

=> create:
-  allocate disk space, create description and location on disk with metadata
-  no file types in unix (left up to program to interpret)

=> delete:
-  find directory for file
-  free disk blocks, remove discriptor 
-  what about links?

=> open:
-  check if already open, check protection, increment open count, create process table
-  file pointer to start of file

=> write:
-  copy from a buffer to file
-  memory map (map file in virtual address space)

=> close:
-  remove entry for file, if count 0 remove system wide table


=> Protection:
-  Access control list (win): maintain list of all users that have access
-  Permission bits: owner, group, everyone else (4:read, 2:write, 1:exec)
